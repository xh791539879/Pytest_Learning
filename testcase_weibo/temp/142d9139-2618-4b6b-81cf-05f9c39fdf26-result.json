{"name": "test_weibo_requests[case_info1]", "status": "failed", "statusDetails": {"message": "Failed: 测试用例：网红狗艾特去世 -query不正确：数据结构不符合预期\nassert False", "trace": "self = <testcase_weibo.test_qushi_data.TestWeiboRequests object at 0x00000217D6CFD6D0>\ncase_info = {'category': 9962, 'desc': '兽医师称：艾特是窒息死亡，与年纪或有没有病无关。', 'name': '网红狗艾特去世 -query不正确', 'request': {'data_or_params': {'pa...'page_size': 10, 'tab': 0, 'trend_word': '网红狗艾特去世2'}, 'method': 'get', 'url': 'http://10.85.93.234:58881/api/big_hot'}}\n\n    @pytest.mark.parametrize('case_info',read_yaml('testcase_weibo/request.yaml'))\n    def test_weibo_requests(self,case_info):\n        name =case_info['name']\n        method=case_info['request']['method']\n        url=case_info['request']['url']\n        data_or_params=case_info['request']['data_or_params']\n    \n    \n        # log_dir = \"logs\"\n        # if not os.path.exists(log_dir):\n        #     os.makedirs(log_dir)\n        #\n        # log_file_name = os.path.join(log_dir, f'{name}.log')\n    \n        # log_file_name = f\"{log_dir}/{name}.log\"\n        # LogUtil.setup_logging(log_file_name)\n    \n        logger_name = f\"TestWeiboRequests.{name}\"\n    \n    \n        # log_file_name = f'{pytest.base_log_file_name}_{name}.log'\n        # LogUtil.setup_logging(log_file_name)\n    \n    \n        # LogUtil.info('\\n')\n        LogUtil.info(logger_name,f'测试用例：{name},开始执行')\n        LogUtil.info(logger_name,f'请求方法：{method},请求地址{url},请求参数{data_or_params}）')\n        try:\n            if method=='post':\n                response =  send_all_request(method=method,url=url,data=data_or_params)\n            else:\n                response = send_all_request(method=method,url=url,params=data_or_params)\n            assert response.status_code==200,f'测试用例：{name}:响应状态吗码不是200，而是{response.status_code}'\n    \n            response_data = response.json()\n            target_category = '9962'\n            target_entry = None\n            for entry in response_data['data']:\n                if entry['category']==target_category:\n                    target_entry = entry\n                    break\n    \n            if 'data' in target_entry and 'data' in target_entry['data'] and 'material' in target_entry['data']['data']:\n                material_data = target_entry['data']['data']['material']\n                LogUtil.info(logger_name,f'测试用例：{name}数据结构符合预期')\n            else:\n>               assert False, f'测试用例：{name}：数据结构不符合预期'\nE               AssertionError: 测试用例：网红狗艾特去世 -query不正确：数据结构不符合预期\nE               assert False\n\ntest_qushi_data.py:59: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <testcase_weibo.test_qushi_data.TestWeiboRequests object at 0x00000217D6CFD6D0>\ncase_info = {'category': 9962, 'desc': '兽医师称：艾特是窒息死亡，与年纪或有没有病无关。', 'name': '网红狗艾特去世 -query不正确', 'request': {'data_or_params': {'pa...'page_size': 10, 'tab': 0, 'trend_word': '网红狗艾特去世2'}, 'method': 'get', 'url': 'http://10.85.93.234:58881/api/big_hot'}}\n\n    @pytest.mark.parametrize('case_info',read_yaml('testcase_weibo/request.yaml'))\n    def test_weibo_requests(self,case_info):\n        name =case_info['name']\n        method=case_info['request']['method']\n        url=case_info['request']['url']\n        data_or_params=case_info['request']['data_or_params']\n    \n    \n        # log_dir = \"logs\"\n        # if not os.path.exists(log_dir):\n        #     os.makedirs(log_dir)\n        #\n        # log_file_name = os.path.join(log_dir, f'{name}.log')\n    \n        # log_file_name = f\"{log_dir}/{name}.log\"\n        # LogUtil.setup_logging(log_file_name)\n    \n        logger_name = f\"TestWeiboRequests.{name}\"\n    \n    \n        # log_file_name = f'{pytest.base_log_file_name}_{name}.log'\n        # LogUtil.setup_logging(log_file_name)\n    \n    \n        # LogUtil.info('\\n')\n        LogUtil.info(logger_name,f'测试用例：{name},开始执行')\n        LogUtil.info(logger_name,f'请求方法：{method},请求地址{url},请求参数{data_or_params}）')\n        try:\n            if method=='post':\n                response =  send_all_request(method=method,url=url,data=data_or_params)\n            else:\n                response = send_all_request(method=method,url=url,params=data_or_params)\n            assert response.status_code==200,f'测试用例：{name}:响应状态吗码不是200，而是{response.status_code}'\n    \n            response_data = response.json()\n            target_category = '9962'\n            target_entry = None\n            for entry in response_data['data']:\n                if entry['category']==target_category:\n                    target_entry = entry\n                    break\n    \n            if 'data' in target_entry and 'data' in target_entry['data'] and 'material' in target_entry['data']['data']:\n                material_data = target_entry['data']['data']['material']\n                LogUtil.info(logger_name,f'测试用例：{name}数据结构符合预期')\n            else:\n                assert False, f'测试用例：{name}：数据结构不符合预期'\n    \n            assert target_entry is not None,f'测试用例{name}:没找到9962这个字段'\n            expected_desc = \"兽医师称：艾特是窒息死亡，与年纪或有没有病无关。\"\n            assert material_data[0]['desc']==expected_desc,f'测试用例：{name}：desc断言失败,期望值为{expected_desc},实际desc为{material_data[0]['desc']}'\n            LogUtil.info(logger_name,f'测试用例：{name},执行成功')\n    \n        except AssertionError as e:\n            LogUtil.error(logger_name,'测试用例：{name}，测试失败:{e}')\n>           pytest.fail(str(e))\nE           Failed: 测试用例：网红狗艾特去世 -query不正确：数据结构不符合预期\nE           assert False\n\ntest_qushi_data.py:68: Failed"}, "attachments": [{"name": "log", "source": "83549932-1e56-4c7a-b0d4-d1049b773c08-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "case_info", "value": "{'name': '网红狗艾特去世 -query不正确', 'request': {'method': 'get', 'url': 'http://10.85.93.234:58881/api/big_hot', 'data_or_params': {'tab': 0, 'page_number': 1, 'page_size': 10, 'trend_word': '网红狗艾特去世2'}}, 'category': 9962, 'desc': '兽医师称：艾特是窒息死亡，与年纪或有没有病无关。'}"}], "start": 1738826368344, "stop": 1738826368369, "uuid": "62fdc2ef-c908-4fda-aa67-dd4bf19b5b7a", "historyId": "bfccd27f9626c1aa260e23c155e423d9", "testCaseId": "7dfc4a7d038333bb22beae21149b0674", "fullName": "testcase_weibo.test_qushi_data.TestWeiboRequests#test_weibo_requests", "labels": [{"name": "parentSuite", "value": "testcase_weibo"}, {"name": "suite", "value": "test_qushi_data"}, {"name": "subSuite", "value": "TestWeiboRequests"}, {"name": "host", "value": "MININT-TB0K1R0"}, {"name": "thread", "value": "180-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcase_weibo.test_qushi_data"}]}